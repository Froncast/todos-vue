(function(t){function e(e){for(var n,i,o=e[0],c=e[1],u=e[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&p.push(s[i][0]),s[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(p.length)p.shift()();return r.push.apply(r,u||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==s[c]&&(n=!1)}n&&(r.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},s={app:0},r=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/todos-vue/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var n=a("85ec"),s=a.n(n);s.a},"55af":function(t,e,a){"use strict";var n=a("98e3"),s=a.n(n);s.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],i=(a("034f"),a("2877")),o={},c=Object(i["a"])(o,s,r,!1,null,null,null),u=c.exports,l=a("8c4f"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Header"),a("Todo")],1)},p=[],f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"header"},[a("div",{staticClass:"container"},[a("div",{staticClass:"header-inner"},[a("router-link",{staticClass:"logo",attrs:{to:"/todos-vue/"}},[a("svg",{staticClass:"logo-img",attrs:{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("g",{attrs:{"clip-path":"url(#clip0)"}},[a("path",{attrs:{d:"M20 40C31.0457 40 40 31.0457 40 20C40 8.9543 31.0457 0 20 0C8.9543 0 0 8.9543 0 20C0 31.0457 8.9543 40 20 40Z",fill:"#3ADA7A"}}),a("path",{attrs:{d:"M28.4135 11.0125L27.2 9.79898H8.4221V30.201L18.1337 39.9126C18.7484 39.9695 19.3705 40 20 40C30.7668 40 39.5449 31.4918 39.9815 20.8322L31.5778 12.4286L28.9684 10.3445L28.4135 11.0125Z",fill:"#31B666"}}),a("path",{attrs:{d:"M26.5051 27.8819H10.7413V12.1181H25.2735L27.2001 9.79898H8.42218V30.201H28.8242V18.8068L26.5051 21.5885V27.8819Z",fill:"#E9E9E9"}}),a("path",{attrs:{d:"M14.2302 15.9141L11.8998 18.2445L20.0483 26.3929L23.4045 22.544L31.5778 12.4286L28.9683 10.3445L19.809 21.3708L14.2302 15.9141Z",fill:"#E9E9E9"}})]),a("defs",[a("clipPath",{attrs:{id:"clip0"}},[a("rect",{attrs:{width:"40",height:"40",fill:"white"}})])])]),a("span",{staticClass:"logo-text"},[t._v("Task List")])])],1)])])},g=[],h={},v=h,m=(a("df1f"),Object(i["a"])(v,f,g,!1,null,"1d671b6c",null)),_=m.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"todo"},[a("div",{staticClass:"container"},[a("div",{staticClass:"todo-wrapper"},[a("div",{staticClass:"todo-header"},[a("h2",{staticClass:"todo__title"},[t._v("Список задач")]),a("button",{staticClass:"todo__sort",on:{click:t.tasksSortByDate}},[a("img",{staticClass:"sort sort-img sort--asc",attrs:{width:"20",height:"20",src:"https://www.flaticon.com/svg/static/icons/svg/475/475288.svg"}})])]),a("div",{staticClass:"todo-add-task"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"todo-add-task__input",attrs:{type:"text",placeholder:"Новая задача"},domProps:{value:t.title},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addTask(e)},input:function(e){e.target.composing||(t.title=e.target.value)}}}),a("button",{staticClass:"todo-add-task__btn",on:{click:t.addTask}},[t._v("Добавить")])]),t.loading?t._e():a("TasksList",{attrs:{tasks:t.TASKS}}),t.loading?a("Preloader"):t._e()],1)])])},T=[],b=a("5530"),w=a("2f62"),E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loading?t._e():a("div",[a("ul",{staticClass:"todo-list"},t._l(t.paginatedTasks,(function(e){return a("router-link",{key:e.id,staticClass:"todo-item",class:{"todo-item--completed":e.status},attrs:{tag:"li",to:"/todos-vue/task/"+e.id}},[a("a",{staticClass:"todo-item__link"},[t._v(t._s(e.title))]),a("div",{staticClass:"todo-buttons"},[a("button",{staticClass:"todo__btn",on:{click:function(a){return t.toggleStatus(e.id,e.status)}}},[a("img",{attrs:{width:"20",height:"20",src:"https://www.flaticon.com/svg/static/icons/svg/20/20758.svg"}})]),a("button",{staticClass:"todo__btn",on:{click:function(a){return t.deleteTask(e.id)}}},[a("img",{attrs:{width:"20",height:"20",src:"https://www.flaticon.com/svg/static/icons/svg/2087/2087868.svg"}})])])])})),1),a("Pagination",{attrs:{"current-page":t.currentPage,total:t.tasks.length}})],1)},S=[],L=(a("fb6a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.total>0?a("div",{staticClass:"pagination"},[a("div",{staticClass:"pagination__left"},[t.hasPrev()?a("router-link",{staticClass:"pagination__item pagination--prev-page",attrs:{tag:"div",to:"/todos-vue/page/"+t.prevPage}},[a("a",{staticClass:"pagination__item-link"},[a("svg",{attrs:{width:"7",height:"10",viewBox:"0 0 7 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M6.33334 1.18333L2.51668 5L6.33334 8.825L5.15834 10L0.158343 5L5.15834 0L6.33334 1.18333Z",fill:"#B2B2B2"}})])])]):t._e()],1),a("div",{staticClass:"pagination__mid"},[a("ul",{staticClass:"pagination-list-pages"},[t.hasFirst()?a("router-link",{staticClass:"pagination__item",attrs:{tag:"li",to:"/todos-vue/page/1"}},[a("a",{staticClass:"pagination__item-link"},[t._v("1")])]):t._e(),t._l(t.pages,(function(e){return a("router-link",{key:e,staticClass:"pagination__item",attrs:{tag:"li",to:"/todos-vue/page/"+e}},[a("a",{staticClass:"pagination__item-link",class:{"pagination--active-page":t.currentPage===e}},[t._v(t._s(e))])])})),t.hasLast()?a("router-link",{staticClass:"pagination__item",attrs:{tag:"li",to:"/todos-vue/page/"+t.totalPages}},[a("a",{staticClass:"pagination__item-link"},[t._v(t._s(t.totalPages))])]):t._e()],2)]),a("div",{staticClass:"pagination__right"},[t.hasNext()?a("router-link",{staticClass:"pagination__item pagination--next-page",attrs:{tag:"div",to:"/todos-vue/page/"+t.nextPage}},[a("a",{staticClass:"pagination__item-link"},[a("svg",{attrs:{width:"7",height:"10",viewBox:"0 0 7 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M0.15834 8.81667L3.97501 5L0.15834 1.175L1.33334 0L6.33334 5L1.33334 10L0.15834 8.81667Z",fill:"#B2B2B2"}})])])]):t._e()],1)]):t._e()}),C=[],y=(a("a9e3"),{props:{currentPage:{type:Number,default:1},total:{type:Number,default:0},perPage:{type:Number,default:10},pageRange:{type:Number,default:2}},computed:{pages:function(){for(var t=[],e=this.rangeStart;e<=this.rangeEnd;e++)t.push(e);return t},rangeStart:function(){var t=this.currentPage-this.pageRange;return t>0?t:1},rangeEnd:function(){var t=this.currentPage+this.pageRange;return t<this.totalPages?t:this.totalPages},totalPages:function(){return Math.ceil(this.total/this.perPage)},prevPage:function(){return this.currentPage-1},nextPage:function(){return this.currentPage+1}},methods:{hasFirst:function(){return 1!==this.rangeStart},hasLast:function(){return this.rangeEnd<this.totalPages},hasPrev:function(){return this.currentPage>1},hasNext:function(){return this.currentPage<this.totalPages}}}),A=y,x=(a("55af"),Object(i["a"])(A,L,C,!1,null,"5c44f113",null)),P=x.exports,O={data:function(){return{currentPage:this.$route.params["page"]&&parseInt(this.$route.params["page"])||1,tasksPerPages:10}},props:{tasks:{type:Array,default:function(){return[]}}},methods:{toggleStatus:function(t,e){var a={id:t,status:e};this.$store.dispatch("TOGGLE_STATUS_TASK",a)},deleteTask:function(t){this.$store.dispatch("DELETE_TASK",t)}},computed:{loading:function(){return this.$store.getters.loading},paginatedTasks:function(){var t=(this.currentPage-1)*this.tasksPerPages,e=t+this.tasksPerPages;return this.tasks.slice(t,e)}},watch:{$route:function(t){this.currentPage=t.params["page"]&&parseInt(t.params["page"])||1}},components:{Pagination:P}},K=O,$=(a("796e"),Object(i["a"])(K,E,S,!1,null,"54cdbe25",null)),D=$.exports,j=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},B=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sk-wave"},[a("div",{staticClass:"sk-rect sk-rect-1"}),a("div",{staticClass:"sk-rect sk-rect-2"}),a("div",{staticClass:"sk-rect sk-rect-3"}),a("div",{staticClass:"sk-rect sk-rect-4"}),a("div",{staticClass:"sk-rect sk-rect-5"})])}],G={name:"Preloader"},I=G,R=(a("667a"),Object(i["a"])(I,j,B,!1,null,"05d1635a",null)),M=R.exports,H={data:function(){return{title:""}},computed:Object(b["a"])(Object(b["a"])({},Object(w["b"])(["TASKS"])),{},{loading:function(){return this.$store.getters.loading}}),methods:{tasksSortByDate:function(){this.$store.dispatch("SORT_TASK_BY_DATE")},addTask:function(){var t={title:this.title,status:!1,createdAt:+new Date};this.title="",this.$store.dispatch("SAVE_TASK",t),this.$route.params["page"]&&1!==parseInt(this.$route.params["page"])&&this.$router.push("/todos-vue/page/1")}},mounted:function(){this.$store.dispatch("GET_TASKS")},components:{TasksList:D,Preloader:M}},V=H,N=(a("7886"),Object(i["a"])(V,k,T,!1,null,"a7611696",null)),U=N.exports,Y={name:"Home",components:{Header:_,Todo:U}},Z=Y,F=Object(i["a"])(Z,d,p,!1,null,null,null),z=F.exports,J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Header"),a("div",{staticClass:"container"},[a("h2",{staticClass:"page-title"},[t._v("Редактировать задачу")]),t.loading?t._e():a("div",[a("div",[t._v(t._s(t.setData(t.taskById)))]),a("p",{staticClass:"date"},[t._v("Дата и время добавления: "+t._s(t.formatDate(t.taskById.createdAt)))]),a("div",{staticClass:"todo-edit-task form"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"task-title"}},[t._v("Название")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.task.title,expression:"task.title"}],staticClass:"form-control",attrs:{id:"task-title",type:"text"},domProps:{value:t.task.title},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.updateTask())},input:function(e){e.target.composing||t.$set(t.task,"title",e.target.value)}}})]),a("div",{staticClass:"form-buttons"},[a("button",{staticClass:"todo__btn--save",on:{click:function(e){return e.preventDefault(),t.updateTask()}}},[t._v("Сохранить")]),a("button",{staticClass:"todo__btn--canceling",on:{click:function(e){return e.preventDefault(),t.getBack()}}},[t._v("Отмена")])])])]),t.loading?a("Preloader"):t._e()],1)],1)},W=[],X={name:"Task",data:function(){return{id:this.$route.params["id"],task:null}},methods:{setData:function(t){this.task=t},formatDate:function(t){return new Date(t).toLocaleString("ru",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})},getBack:function(){this.$router.back()},updateTask:function(){var t={id:this.task.id,title:this.task.title};this.$store.dispatch("TOGGLE_TITLE_TASK",t)}},computed:{taskById:function(){var t=this.id;return this.$store.getters.GET_TASK_BY_ID(t)},loading:function(){return this.$store.getters.loading}},components:{Header:_,Preloader:M}},q=X,Q=(a("8748"),Object(i["a"])(q,J,W,!1,null,"035e6c78",null)),tt=Q.exports;n["a"].use(l["a"]);var et=[{path:"",name:"Home",component:z},{path:"/todos-vue/task/:id",name:"task",component:tt},{path:"/todos-vue/page/:page",name:"page",component:z},{path:"*",component:z}],at=new l["a"]({routes:et,mode:"history"}),nt=at,st=a("3317"),rt=(a("7db0"),a("c740"),a("4160"),a("a434"),a("159b"),a("96cf"),a("1da1")),it=a("59ca"),ot=a.n(it),ct=(a("e71f"),ot.a.initializeApp({apiKey:"AIzaSyCCovWx8UsriDTkYMsEIkdaKU_lWR0kPAE",authDomain:"todo-vue-7d916.firebaseapp.com",databaseURL:"https://todo-vue-7d916.firebaseio.com",projectId:"todo-vue-7d916",storageBucket:"todo-vue-7d916.appspot.com",messagingSenderId:"646482519820",appId:"1:646482519820:web:65452002b18b3da9eb0b29",measurementId:"G-LKX79RVVFD"}).firestore()),ut={state:{tasks:[]},mutations:{SET_TASKS:function(t,e){t.tasks=e.sort((function(t,e){return t.createdAt-e.createdAt}))},ADD_TASK:function(t,e){t.tasks.push(e)},DEL_TASK:function(t,e){var a=t.tasks.findIndex((function(t){return t.id===e}));t.tasks.splice(a,1)},SORT_TASK_BY_DATE:function(t){t.tasks=t.tasks.reverse()},TOGGLE_STATUS_TASK:function(t,e){var a=t.tasks.findIndex((function(t){return t.id===e}));t.tasks[a].status=!t.tasks[a].status},TOGGLE_TITLE_TASK:function(t,e){var a=t.tasks.findIndex((function(t){return t.id===e.id}));console.log("1",t.tasks[a].title),console.log("payload",e.title),t.tasks[a].title=e.title,console.log("2",t.tasks[a].title),console.log("payload",e.title)}},actions:{GET_TASKS:function(){var t=Object(rt["a"])(regeneratorRuntime.mark((function t(e){var a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,a("clearError"),a("setLoading",!0),t.prev=3,n=[],t.next=7,ct.collection("tasks").get();case 7:s=t.sent,s.forEach((function(t){n.push(Object(b["a"])({id:t.id},t.data()))})),a("SET_TASKS",n),a("setLoading",!1),t.next=18;break;case 13:throw t.prev=13,t.t0=t["catch"](3),a("setError",t.t0.message),a("setLoading",!1),t.t0;case 18:case"end":return t.stop()}}),t,null,[[3,13]])})));function e(e){return t.apply(this,arguments)}return e}(),SAVE_TASK:function(){var t=Object(rt["a"])(regeneratorRuntime.mark((function t(e,a){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,n("clearError"),n("setLoading",!0),t.prev=3,t.next=6,ct.collection("tasks").add(a);case 6:s=t.sent,a.id=s.id,n("ADD_TASK",a),n("setLoading",!1),t.next=17;break;case 12:throw t.prev=12,t.t0=t["catch"](3),n("setError",t.t0.message),n("setLoading",!1),t.t0;case 17:case"end":return t.stop()}}),t,null,[[3,12]])})));function e(e,a){return t.apply(this,arguments)}return e}(),DELETE_TASK:function(){var t=Object(rt["a"])(regeneratorRuntime.mark((function t(e,a){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,n("clearError"),n("setLoading",!0),t.prev=3,t.next=6,ct.collection("tasks").doc(a).delete();case 6:n("DEL_TASK",a),n("setLoading",!1),t.next=15;break;case 10:throw t.prev=10,t.t0=t["catch"](3),n("setError",t.t0.message),n("setLoading",!1),t.t0;case 15:case"end":return t.stop()}}),t,null,[[3,10]])})));function e(e,a){return t.apply(this,arguments)}return e}(),SORT_TASK_BY_DATE:function(t){var e=t.commit;e("SORT_TASK_BY_DATE")},TOGGLE_STATUS_TASK:function(){var t=Object(rt["a"])(regeneratorRuntime.mark((function t(e,a){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,n("clearError"),t.prev=2,t.next=5,ct.collection("tasks").doc(a.id).update({status:!a.status});case 5:n("TOGGLE_STATUS_TASK",a.id),t.next=12;break;case 8:throw t.prev=8,t.t0=t["catch"](2),n("setError",t.t0.message),t.t0;case 12:case"end":return t.stop()}}),t,null,[[2,8]])})));function e(e,a){return t.apply(this,arguments)}return e}(),TOGGLE_TITLE_TASK:function(){var t=Object(rt["a"])(regeneratorRuntime.mark((function t(e,a){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,n("clearError"),n("setLoading",!0),t.prev=3,t.next=6,ct.collection("tasks").doc(a.id).update({title:a.title});case 6:n("TOGGLE_TITLE_TASK",a),n("setLoading",!1),t.next=15;break;case 10:throw t.prev=10,t.t0=t["catch"](3),n("setError",t.t0.message),n("setLoading",!1),t.t0;case 15:case"end":return t.stop()}}),t,null,[[3,10]])})));function e(e,a){return t.apply(this,arguments)}return e}()},getters:{TASKS:function(t){return t.tasks},GET_TASK_BY_ID:function(t){return function(e){return t.tasks.find((function(t){return t.id===e}))}}}},lt={state:{loading:!1,error:null},mutations:{setLoading:function(t,e){t.loading=e},setError:function(t,e){t.error=e},clearError:function(t){t.error=null}},actions:{setLoading:function(t,e){var a=t.commit;a("setLoading",e)},setError:function(t,e){var a=t.commit;a("setError",e)},clearError:function(t){var e=t.commit;e("clearError")}},getters:{loading:function(t){return t.loading},error:function(t){return t.error}}};n["a"].use(w["a"]);var dt=new w["a"].Store({mutations:st["a"],modules:{tasks:ut,shared:lt}}),pt=a("0ff2");n["a"].use(pt["a"]),n["a"].config.productionTip=!1,new n["a"]({router:nt,store:dt,render:function(t){return t(u)},created:function(){this.$store.dispatch("GET_TASKS")}}).$mount("#app")},"667a":function(t,e,a){"use strict";var n=a("aa76"),s=a.n(n);s.a},"6db1":function(t,e,a){},7886:function(t,e,a){"use strict";var n=a("bff4"),s=a.n(n);s.a},"796e":function(t,e,a){"use strict";var n=a("d39d"),s=a.n(n);s.a},"85ec":function(t,e,a){},8748:function(t,e,a){"use strict";var n=a("ef26"),s=a.n(n);s.a},"98e3":function(t,e,a){},aa76:function(t,e,a){},bff4:function(t,e,a){},d39d:function(t,e,a){},df1f:function(t,e,a){"use strict";var n=a("6db1"),s=a.n(n);s.a},ef26:function(t,e,a){}});
//# sourceMappingURL=app.15669178.js.map